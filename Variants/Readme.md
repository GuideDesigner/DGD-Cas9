# DGD
=======
# DGD-VAR (Deep Guide Designer for SpCas9 Variants)
[![Build Status](https://travis-ci.org/joemccann/dillinger.svg?branch=master)](https://travis-ci.org/joemccann/dillinger)

DGD-VAR similar to DGD  is python based on-target scoring method for SpCas9 and variants employing optimal scaffold, which is developed by integrating information from target sequence, biofeatures and spacer-scaffold base-pairing of sgRNA into CNN based deep learning model.

## Source Code

### Briefings of python files
- Github directory contains main files and subsidary python files for the ease of users.
- Name of main file is ```DGD.py``` which when run will execute all the necessary files and give score as output.
- The input file should be fasta sequence (```.fa```), DGD pipeline can take multiple fasta sequence files.
- Prior to use of any files both main and accessory, please install the packages as mentioned in ```Requirement``` section.

#### Requirements
- Python 3.6 or above
- Vienna RNA package
- Numpy (version >= 1.12.4)
- Pandas (version >= 1.1.4)
- Keras (version >= 2.2.5)
- Tensorflow(version == 2.2.0)
- R (version >= 3.6)
- gcc (version >= 4.7.0)

#### Package Installation
You compile c++ file:
```
make
```
Pre-compiled files(```connection_to_matrix``` ) are provided for ```DGDVar.py```

For Vienna RNA package see the instruction in their official site https://www.tbi.univie.ac.at/RNA/ for python installation
The rest packages could be installed by using ```pip``` or ```conda```

### Use
DGD python files is executed on fasta file
- The input file should in fasta format
- For demo purpose the length of fasta file is in range between 100nt to 10000nt
- The output are shown in ```.csv``` format which compromises of ID,Start,End,Strand, 30nt sequence and on-target score
```python
   python DGD.py input.fa
   
   Example file: input.fa
   
    >JQ277699.1 Ovis aries LIN28A (LIN28A) mRNA, complete cds
    ACCCCTTTGCCTCCGGACTTCTCTGGGGCCAGCAGCCGCCCAAGCGAGGGCCCGGGGCCGCGAGCTCAGC
    AGACTACCATGGGCTCTGTGTCAAACCAGCAGTTCGCAGGTGGCTGCGCTAAGGCGCCGGAGGAAGCGCC
    GGAGGAGGCGCCGGAGGACGCGGCCCGCGCGGCGGAGGAGCCGCAGCTGCTGCACGGTGCCGGCATCTGT
    AAGTGGTTCAACGTGCGCATGGGGTTCGGCTTCCTGTCCATGACCGCCCGCGCAGGGGTCGCGCTCGACC
    CCCCGGTGGATGTCTTTGTGCACCAGAGTAAGCTGCACATGGAGGGCTTCCGGAGCCTGAAGGAGGGGGA
    GGCTGTGGAGTTCACCTTTAAGAAGTCCGCCAAGGGCCTGGAATCTATCCGAGTCACCGGCCCTGGTGGG
    GTGTTCTGTATTGGGAGTGAAAGGCGGCCCAAAGGGAAGAATGTGCAGAAACGCAGATCAAAGGGAGACA
    GGTGCTACAACTGTGGAGGTCTAGACCATCATGCCAAGGAATGCAAACTGCCACCGCAGCCCAAGAAGTG
    CCATTTCTGCCAGAGCATCAGCCATATGGTAGCCTCGTGCCCACTGAAGGCCCAGCAAGCTCCCAGCTCC
    CAGGGAAAGCCAGCCTACTTTCGGGAGGAGGAAGAAGAGATCCATAGCTCTGCCATGCTCCCAGAGGCCC
    AGAATTGAAGCCACAGTGGGTGGGAGCTATCCTTTTGTGATCAGAAAGCTTTGAGGAGCAGCATCAATCG
    CCTTTGCCTTCGGACTTCTCCGGGGCCAGCAGCCGCCCGACCAGGGGCCCGGGGCCACGGGCTCAGCCGA
    CGACCATGGGCTCCGTGTCCAACCAGCAGTTTGCAGGTGGCTGCGCCAAGGCGGCAGAAGAGGCGCCCGA
    GGAGGCGCCGGAGGACGCGGCCCGGGCGGCGGACGAGCCTCAGCTGCTGCACGGTGCGGGCATCTGTAAG
    TGGTTCAACGTGCGCATGGGGTTCGGCTTCCTGTCCATGACCGCCCGCGCCGGGGTCGCGCTCGACCCCC
    CAGTGGATGTCTTTGTGCACCAGAGTAAGCTGCACATGGAAGGGTTCCGGAGCTTGAAGGAGGGTGAGGC
    AGTGGAGTTCACCTTTAAGAAGTCAGCCAAGGGTCTGGAATCCATCCGTGTCACCGGACCTGGTGGAGTA
    TTCTGTATTGGGAGTGAGAGGCGGCCAAAAGGAAAGAGCATGCAGAAGCGCAGATCAAAAGGAGACAGGT
    GCTACAACTGTGGAGGTCTAGATCATCATGCCAAGGAATGCAAGCTGCCACCCCAGCCCAAGAAGTGCCA

    >Q278699.2 Ovis aries 
    ACCCCTTTGCCTCCGGACTTCTCTGGGGCCAGCAGCCGCCCAAGCGAGGGCCCGGGGCCGCGAGCTCAGC
    AGACTACCATGGGCTCTGTGTCAAACCAGCAGTTCGCAGGTGGCTGCGCTAAGGCGCCGGAGGAAGCGCC
    GGAGGAGGCGCCGGAGGACGCGGCCCGCGCGGCGGAGGAGCCGCAGCTGCTGCACGGTGCCGGCATCTGT
    AAGTGGTTCAACGTGCGCATGGGGTTCGGCTTCCTGTCCATGACCGCCCGCGCAGGGGTCGCGCTCGACC
    CCCCGGTGGATGTCTTTGTGCACCAGAGTAAGCTGCACATGGAGGGCTTCCGGAGCCTGAAGGAGGGGGA
    GGCTGTGGAGTTCACCTTTAAGAAGTCCGCCAAGGGCCTGGAATCTATCCGAGTCACCGGCCCTGGTGGG
    GTGTTCTGTATTGGGAGTGAAAGGCGGCCCAAAGGGAAGAATGTGCAGAAACGCAGATCAAAGGGAGACA
    GGTGCTACAACTGTGGAGGTCTAGACCATCATGCCAAGGAATGCAAACTGCCACCGCAGCCCAAGAAGTG
    CCATTTCTGCCAGAGCATCAGCCATATGGTAGCCTCGTGCCCACTGAAGGCCCAGCAAGCTCCCAGCTCC
    CAGGGAAAGCCAGCCTACTTTCGGGAGGAGGAAGAAGAGATCCATAGCTCTGCCATGCTCCCAGAGGCCC
    AGAATTGAAGCCACAGTGGGTGGGAGCTATCCTTTTGTGATCAGAAAGCTTTGAGGAGCAGCATCAATCG
    CCTTTGCCTTCGGACTTCTCCGGGGCCAGCAGCCGCCCGACCAGGGGCCCGGGGCCACGGGCTCAGCCGA
```
- Output (DGD.csv)
```
ID	Start	End	Strand	Sequence	DGDSpCas9	DGDeSpCas9	DGDHypaCas9	DGDSpCas9Hf1	DGDSniperCas9	DGDevoCas9	DGDxCas9	DGDSpCas9VRQR	DGDSpCas9NG
JQ277699.1:732:762:+	732	762	+	TTTTGTGATCAGAAAGCTTTGAGGAGCAGC	2.0164063	1.78425	1.78425	1.0501053	1.78425	1.78425	1.78425	16.726068	32.538662
Q278699.2:732:762:+	732	762	+	TTTTGTGATCAGAAAGCTTTGAGGAGCAGC	2.0164063	1.78425	1.78425	1.0501053	1.78425	1.78425	1.78425	16.726068	32.538662
Q278699.2:2062:2092:+	2062	2092	+	TTTTGTGATCAGAAAGCTTTGAGGAGCAGC	2.0164063	1.78425	1.78425	1.0501053	1.78425	1.78425	1.78425	16.726068	32.538662
JQ277699.1:733:763:+	733	763	+	TTTGTGATCAGAAAGCTTTGAGGAGCAGCA	1.3147275	0.5300376	0.5300376	no_activity	0.5300376	0.5300376	0.5300376	23.065205	15.789731
Q278699.2:733:763:+	733	763	+	TTTGTGATCAGAAAGCTTTGAGGAGCAGCA	1.3147275	0.5300376	0.5300376	no_activity	0.5300376	0.5300376	0.5300376	23.065205	15.789731
Q278699.2:2063:2093:+	2063	2093	+	TTTGTGATCAGAAAGCTTTGAGGAGCAGCA	1.3147275	0.5300376	0.5300376	no_activity	0.5300376	0.5300376	0.5300376	23.065205	15.789731
JQ277699.1:1189:1219:-	1189	1219	-	TTTGGCCGCCTCTCACTCCCAATACAGAAT	29.682705	26.492798	26.492798	36.897488	26.492798	26.492798	26.492798	27.007227	32.76264
Q278699.2:1189:1219:-	1189	1219	-	TTTGGCCGCCTCTCACTCCCAATACAGAAT	29.682705	26.492798	26.492798	36.897488	26.492798	26.492798	26.492798	27.007227	32.76264
JQ277699.1:772:802:+	772	802	+	TTTGCCTTCGGACTTCTCCGGGGCCAGCAG	19.421137	14.117567	14.117567	0.37289906	14.117567	14.117567	14.117567	no_activity	4.8990602
Q278699.2:772:802:+	772	802	+	TTTGCCTTCGGACTTCTCCGGGGCCAGCAG	19.421137	14.117567	14.117567	0.37289906	14.117567	14.117567	14.117567	no_activity	4.8990602
```
