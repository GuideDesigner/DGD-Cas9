# DGD
=======
# DGD-VAR (Deep Guide Designer for SpCas9 Variants)
[![Build Status](https://travis-ci.org/joemccann/dillinger.svg?branch=master)](https://travis-ci.org/joemccann/dillinger)

DGD-VAR similar to DGD  is python based on-target scoring method for SpCas9 and variants employing optimal scaffold, which is developed by integrating information from target sequence, biofeatures and spacer-scaffold base-pairing of sgRNA into CNN based deep learning model.

## Source Code

### Briefings of python files
- Github directory contains main files and subsidary python files for the ease of users.
- Name of main file is ```DGD.py``` which when run will execute all the necessary files and give score as output.
- The input file should be fasta sequence (```.fa```), DGD pipeline can take multiple fasta sequence files.
- Prior to use of any files both main and accessory, please install the packages as mentioned in ```Requirement``` section.

#### Requirements
- Python 3.6 or above
- Vienna RNA package
- Numpy (version >= 1.12.4)
- Pandas (version >= 1.1.4)
- Keras (version >= 2.2.5)
- Tensorflow(version == 2.2.0)
- R (version >= 3.6)
- gcc (version >= 4.7.0)

#### Package Installation
You compile c++ file:
```
make
```
Pre-compiled files(```connection_to_matrix``` ) are provided for ```DGDVar.py```

For Vienna RNA package see the instruction in their official site https://www.tbi.univie.ac.at/RNA/ for python installation
The rest packages could be installed by using ```pip``` or ```conda```

### Use
DGD python files is executed on fasta file
- The input file should in fasta format
- For demo purpose the length of fasta file is in range between 100nt to 10000nt
- The output are shown in ```.csv``` format which compromises of ID,Start,End,Strand, 30nt sequence and on-target score
```python
   python DGD.py input.fa
   
   Example file: input.fa
   
    >JQ277699.1 Ovis aries LIN28A (LIN28A) mRNA, complete cds
    ACCCCTTTGCCTCCGGACTTCTCTGGGGCCAGCAGCCGCCCAAGCGAGGGCCCGGGGCCGCGAGCTCAGC
    AGACTACCATGGGCTCTGTGTCAAACCAGCAGTTCGCAGGTGGCTGCGCTAAGGCGCCGGAGGAAGCGCC
    GGAGGAGGCGCCGGAGGACGCGGCCCGCGCGGCGGAGGAGCCGCAGCTGCTGCACGGTGCCGGCATCTGT
    AAGTGGTTCAACGTGCGCATGGGGTTCGGCTTCCTGTCCATGACCGCCCGCGCAGGGGTCGCGCTCGACC
    CCCCGGTGGATGTCTTTGTGCACCAGAGTAAGCTGCACATGGAGGGCTTCCGGAGCCTGAAGGAGGGGGA
    GGCTGTGGAGTTCACCTTTAAGAAGTCCGCCAAGGGCCTGGAATCTATCCGAGTCACCGGCCCTGGTGGG
    GTGTTCTGTATTGGGAGTGAAAGGCGGCCCAAAGGGAAGAATGTGCAGAAACGCAGATCAAAGGGAGACA
    GGTGCTACAACTGTGGAGGTCTAGACCATCATGCCAAGGAATGCAAACTGCCACCGCAGCCCAAGAAGTG
    CCATTTCTGCCAGAGCATCAGCCATATGGTAGCCTCGTGCCCACTGAAGGCCCAGCAAGCTCCCAGCTCC
    CAGGGAAAGCCAGCCTACTTTCGGGAGGAGGAAGAAGAGATCCATAGCTCTGCCATGCTCCCAGAGGCCC
    AGAATTGAAGCCACAGTGGGTGGGAGCTATCCTTTTGTGATCAGAAAGCTTTGAGGAGCAGCATCAATCG
    CCTTTGCCTTCGGACTTCTCCGGGGCCAGCAGCCGCCCGACCAGGGGCCCGGGGCCACGGGCTCAGCCGA
    CGACCATGGGCTCCGTGTCCAACCAGCAGTTTGCAGGTGGCTGCGCCAAGGCGGCAGAAGAGGCGCCCGA
    GGAGGCGCCGGAGGACGCGGCCCGGGCGGCGGACGAGCCTCAGCTGCTGCACGGTGCGGGCATCTGTAAG
    TGGTTCAACGTGCGCATGGGGTTCGGCTTCCTGTCCATGACCGCCCGCGCCGGGGTCGCGCTCGACCCCC
    CAGTGGATGTCTTTGTGCACCAGAGTAAGCTGCACATGGAAGGGTTCCGGAGCTTGAAGGAGGGTGAGGC
    AGTGGAGTTCACCTTTAAGAAGTCAGCCAAGGGTCTGGAATCCATCCGTGTCACCGGACCTGGTGGAGTA
    TTCTGTATTGGGAGTGAGAGGCGGCCAAAAGGAAAGAGCATGCAGAAGCGCAGATCAAAAGGAGACAGGT
    GCTACAACTGTGGAGGTCTAGATCATCATGCCAAGGAATGCAAGCTGCCACCCCAGCCCAAGAAGTGCCA

    >Q278699.2 Ovis aries 
    ACCCCTTTGCCTCCGGACTTCTCTGGGGCCAGCAGCCGCCCAAGCGAGGGCCCGGGGCCGCGAGCTCAGC
    AGACTACCATGGGCTCTGTGTCAAACCAGCAGTTCGCAGGTGGCTGCGCTAAGGCGCCGGAGGAAGCGCC
    GGAGGAGGCGCCGGAGGACGCGGCCCGCGCGGCGGAGGAGCCGCAGCTGCTGCACGGTGCCGGCATCTGT
    AAGTGGTTCAACGTGCGCATGGGGTTCGGCTTCCTGTCCATGACCGCCCGCGCAGGGGTCGCGCTCGACC
    CCCCGGTGGATGTCTTTGTGCACCAGAGTAAGCTGCACATGGAGGGCTTCCGGAGCCTGAAGGAGGGGGA
    GGCTGTGGAGTTCACCTTTAAGAAGTCCGCCAAGGGCCTGGAATCTATCCGAGTCACCGGCCCTGGTGGG
    GTGTTCTGTATTGGGAGTGAAAGGCGGCCCAAAGGGAAGAATGTGCAGAAACGCAGATCAAAGGGAGACA
    GGTGCTACAACTGTGGAGGTCTAGACCATCATGCCAAGGAATGCAAACTGCCACCGCAGCCCAAGAAGTG
    CCATTTCTGCCAGAGCATCAGCCATATGGTAGCCTCGTGCCCACTGAAGGCCCAGCAAGCTCCCAGCTCC
    CAGGGAAAGCCAGCCTACTTTCGGGAGGAGGAAGAAGAGATCCATAGCTCTGCCATGCTCCCAGAGGCCC
    AGAATTGAAGCCACAGTGGGTGGGAGCTATCCTTTTGTGATCAGAAAGCTTTGAGGAGCAGCATCAATCG
    CCTTTGCCTTCGGACTTCTCCGGGGCCAGCAGCCGCCCGACCAGGGGCCCGGGGCCACGGGCTCAGCCGA
```
- Output (DGDBE.csv)
```
  ID	Start	End	Strand	Sequence	DGDABE	DGDCBE
JQ277699.1:732:756	732	756	+	TTTTGTGATCAGAAAGCTTTGAGG	0.17541954	0.05563861
Q278699.2:732:756	732	756	+	TTTTGTGATCAGAAAGCTTTGAGG	0.17541954	0.05563861
Q278699.2:2062:2086	2062	2086	+	TTTTGTGATCAGAAAGCTTTGAGG	0.17541954	0.05563861
JQ277699.1:447:471	447	471	-	TTTCTGCACATTCTTCCCTTTGGG	0.091152616	0.018237501
Q278699.2:447:471	447	471	-	TTTCTGCACATTCTTCCCTTTGGG	0.091152616	0.018237501
Q278699.2:1777:1801	1777	1801	-	TTTCTGCACATTCTTCCCTTTGGG	0.091152616	0.018237501
Q278699.2:1307:1331	1307	1331	-	TTGGCACTTCTTGGGCTGGGGTGG	0.21273272	0.135525
JQ277699.1:870:894	870	894	+	TTGCAGGTGGCTGCGCCAAGGCGG	0.05453702	0.016933214
Q278699.2:870:894	870	894	+	TTGCAGGTGGCTGCGCCAAGGCGG	0.05453702	0.016933214
JQ277699.1:1190:1214	1190	1214	+	TTCTGTATTGGGAGTGAGAGGCGG	0.686649	0.1617485
Q278699.2:1190:1214	1190	1214	+	TTCTGTATTGGGAGTGAGAGGCGG	0.686649	0.1617485
JQ277699.1:423:447	423	447	+	TTCTGTATTGGGAGTGAAAGGCGG	0.69987136	0.14765677
Q278699.2:423:447	423	447	+	TTCTGTATTGGGAGTGAAAGGCGG	0.69987136	0.14765677
Q278699.2:1753:1777	1753	1777	+	TTCTGTATTGGGAGTGAAAGGCGG	0.69987136	0.14765677
JQ277699.1:639:663	639	663	-	TTCCTCCTCCCGAAAGTAGGCTGG	0.007367899	0.24120061
```
